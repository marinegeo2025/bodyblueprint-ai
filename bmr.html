<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Êú¨Êù•„ÅÆÈù¢ÁõÆ, Honrai No Menmoku</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
      .progress-bar-container {
        width: 100%;
        background-color: #ddd;
        border-radius: 10px;
        overflow: hidden;
        margin-top: 10px;
      }
      .progress-bar {
        height: 20px;
        text-align: center;
        line-height: 20px;
        font-size: 12px;
        font-weight: bold;
      }
      .kcal-bar {
        background-color: green;
      }
      .protein-bar {
        background-color: yellow;
      }
    </style>
  </head>
  <body>
    <nav>
      <ul>
        <li><a href="index.html">üè† Home</a></li>
        <li><a href="bmr.html">üèãÔ∏è BMR</a></li>
        <li><a href="weight.html">üìâ Weight</a></li>
        <li><a href="meals.html">üçΩÔ∏è Meals</a></li>
        <li><a href="chat.html">üí¨ AI Chat</a></li>
      </ul>
    </nav>
    <main>
      <section id="bmr" class="page">
        <h1>BMR & Calorie Goal</h1>
        <p>Calculate your Basal Metabolic Rate and set your calorie goal.</p>

        <!-- BMR Form -->
        <form id="bmrForm">
          <label for="age">Age:</label><br />
          <input type="number" id="age" required /><br /><br />

          <label for="gender">Gender:</label><br />
          <select id="gender">
            <option value="male">Male</option>
            <option value="female">Female</option>
          </select><br /><br />

          <label for="height">Height (cm):</label><br />
          <input type="number" id="height" required /><br /><br />

          <label for="weight">Weight (kg):</label><br />
          <input type="number" id="weight" required /><br /><br />

          <button type="submit">Calculate BMR</button>
        </form>

        <div id="bmrResults"></div>

        <!-- Cut / Bulk Section -->
        <h2>Set Your Goal</h2>
        <p><strong>Current Goal:</strong> <span id="goalDisplay">None</span></p>
        <p><strong>Target Calories:</strong> <span id="targetCalories">-</span> kcal</p>

        <label for="cutCalories">Cut (Deficit):</label>
        <input type="number" id="cutCalories" placeholder="Enter deficit (e.g. 300)" />
        <button onclick="setGoal('cut')">Set Cut Goal</button>
        <br /><br />

        <label for="bulkCalories">Bulk (Surplus):</label>
        <input type="number" id="bulkCalories" placeholder="Enter surplus (e.g. 500)" />
        <button onclick="setGoal('bulk')">Set Bulk Goal</button>

        <h2>Daily Progress</h2>
        <p><strong>Calories Consumed:</strong> <span id="currentCalories">0</span> / <span id="targetCaloriesDisplay">0</span> kcal</p>
        <div class="progress-bar-container">
          <div id="kcalProgress" class="progress-bar kcal-bar" style="width: 0%">0%</div>
        </div>

        <p><strong>Protein Consumed:</strong> <span id="currentProtein">0</span> g</p>
        <div class="progress-bar-container">
          <div id="proteinProgress" class="progress-bar protein-bar" style="width: 0%">0%</div>
        </div>
      </section>
    </main>

    <footer>
      <p>Êú¨Êù•„ÅÆÈù¢ÁõÆ, Honrai No Menmoku &copy; 2025</p>
    </footer>

    <script>
      document.getElementById("bmrForm").addEventListener("submit", function (event) {
        event.preventDefault();

        const age = parseInt(document.getElementById("age").value);
        const gender = document.getElementById("gender").value;
        const weight = parseFloat(document.getElementById("weight").value);
        const height = parseFloat(document.getElementById("height").value);

        let bmr;
        if (gender === "male") {
          bmr = 10 * weight + 6.25 * height - 5 * age + 5;
        } else {
          bmr = 10 * weight + 6.25 * height - 5 * age - 161;
        }

        document.getElementById("bmrResults").innerHTML = `<h2>Your Results</h2>
          <p><strong>BMR (Used as TDEE):</strong> ${bmr.toFixed(2)} kcal/day</p>`;

        localStorage.setItem("bmr", bmr);
        updateGoalDisplay();
      });

      function setGoal(type) {
        const bmr = parseFloat(localStorage.getItem("bmr"));
        if (!bmr) {
          alert("Please calculate BMR first!");
          return;
        }

        let goal, targetCalories;
        if (type === "cut") {
          targetCalories = bmr - 250;
          goal = "Cut (-250 kcal)";
        } else if (type === "bulk") {
          targetCalories = bmr + 250;
          goal = "Bulk (+250 kcal)";
        }

        localStorage.setItem("goal", goal);
        localStorage.setItem("targetCalories", targetCalories);
        updateGoalDisplay();
      }

      function updateGoalDisplay() {
        document.getElementById("goalDisplay").innerText = localStorage.getItem("goal") || "None";
        document.getElementById("targetCalories").innerText = localStorage.getItem("targetCalories") || "-";
        document.getElementById("targetCaloriesDisplay").innerText = localStorage.getItem("targetCalories") || "0";
      }

      updateGoalDisplay();
    </script>
  </body>
</html>
